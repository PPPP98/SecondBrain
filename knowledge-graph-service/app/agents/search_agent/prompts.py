class Prompts:
    PRE_FILTER_PROMPT = """
    검색 쿼리 분석 전문가입니다.

    ## 작업내용 : 시간 추출 + 검색 타입 결정 + 쿼리 재작성

    ---

    ### 1. timespan (시간 범위)

    시간 표현을 ISO 8601 형식으로 변환 (YYYY-MM-DDTHH:MM:SS+09:00)
    - 현재 시각 기준으로 상대 시간 계산
    - 애매한 표현은 합리적 해석 (최근=7일, 요며칠=3일)
    - 없으면 null

    ---

    ### 2. search_type (검색 타입)

    **3가지 타입**:
    **A. direct_answer** (검색 불필요)
    - 조건: 노트 검색이 필요 없는 일반 질문

    **simple_lookup**:
    - 조건: 시간 표현만 있고 구체적 검색어 없음
    - 예시: "어제 작성한 노트", "오늘 쓴 거", "이번 주 메모"
    - 처리: 시간 필터로 노트 검색

    **similarity**:
    - 조건: 구체적 검색어가 있음 (키워드든 문장이든)
    - 예시: "AI 알고리즘", "React Hook 사용법", "프론트엔드 최적화 방법"
    - 처리: 벡터 유사도 검색

    **판단 기준**:
    - 시간만 있고 "작성", "노트", "메모" 같은 일반 단어만 → simple_lookup
    - 구체적 주제/개념/키워드 있음 → similarity

    ---

    ### 3. query (재작성 쿼리) - similarity일 때만

    **목적**: 벡터 검색 품질 향상

    **작업**:
    1. 시간 표현 제거
    2. 핵심 검색 의도 유지
    3. 명확하고 풍부한 표현으로 재작성
    4. 동의어나 관련 개념 포함하여 확장

    **예시**:
    - "어제 AI 알고리즘" → "인공지능 알고리즘 개념과 구현 방법"
    - "React Hook 사용법" → "React Hooks 사용 방법과 패턴"
    - "프론트엔드 최적화" → "프론트엔드 성능 최적화 기법과 방법론"
    - "팀 협업 방법" → "효과적인 팀 협업과 커뮤니케이션 전략"

    **simple_lookup이면**: 빈 문자열 ""

    ---

    ## 현재 시각

    - {current_datetime} ({weekday_korean}, {week_number}주차)

    ## 입력

    {query}

    ---

    JSON 응답.
    """

    RELEVANCE_CHECK_PROMPT = """
    당신은 문서 관련성 판단 전문가입니다.
    ## 작업
    사용자의 질문과 노트 제목을 보고, 조금이라도 관련이 있는지 판단합니다.

    ## 판단 기준

    **관련 있음 (is_relevant: true)**:
    - 질문과 직접적으로 관련된 내용
    - 질문에 답변할 수 있는 정보가 있을 가능성

    **관련 없음 (is_relevant: false)**:
    - 질문과 완전히 다른 주제
    - 질문에 도움이 되지 않을 것 같음

    ## 입력

    질문: {query}
    노트 제목: {title}

    ## 출력 형식

    JSON으로 응답하세요:
    {{
    "is_relevant": true/false,
    }}"""
