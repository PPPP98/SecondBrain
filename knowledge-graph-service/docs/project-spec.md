# π“ Knowledge Graph Service - ν”„λ΅μ νΈ μ¤ν™ & μ§„ν–‰μƒν™©

> Neo4j κΈ°λ° μλ―Έλ΅ μ  μ μ‚¬λ„ λ¶„μ„μ„ ν†µν•΄ κ°μΈ λ…ΈνΈλ¥Ό μλ™μΌλ΅ μ—°κ²°ν•λ” μ§€μ‹ κ·Έλν”„ κµ¬μ¶• μ‹μ¤ν…

**μ‘μ„±μΌ**: 2025-11-03  
**μƒνƒ**: Phase 4 μ™„λ£ (1μ°¨ MVP μ™„λ£)  
**λ‹¤μ λ‹¨κ³„**: Phase 5 - λΉ„λ™κΈ° μ²λ¦¬ + RabbitMQ

---

## π“‹ ν”„λ΅μ νΈ κ°μ”

### ν•µμ‹¬ λ©ν‘
μ‚¬μ©μκ°€ μ‘μ„±ν• λ…ΈνΈλ“¤μ„ μλ™μΌλ΅ μ„λ² λ”©ν•κ³ , μλ―Έλ΅ μ  μ μ‚¬λ„λ¥Ό κΈ°λ°μΌλ΅ κ΄€λ ¨ λ…ΈνΈλ“¤μ„ μλ™ μ—°κ²°ν•μ—¬ μ§€μ‹ κ·Έλν”„λ¥Ό κµ¬μ¶•

### μ£Όμ” νΉμ§•
- β… **μλ™ μ„λ² λ”©**: OpenAI API (text-embedding-3-small, 1536μ°¨μ›)
- β… **λ²΅ν„° κΈ°λ° κ²€μƒ‰**: HNSW μΈλ±μ¤ + μ½”μ‚¬μΈ μ μ‚¬λ„
- β… **μλ™ κ΄€κ³„ ν•μ„±**: μ„κ³„κ°’ κΈ°λ° ν•„ν„°λ§ (κΈ°λ³Έ: 0.70)
- β… **μ‚¬μ©μ κ²©λ¦¬**: λ‹¤μ¤‘ μ‚¬μ©μ μ§€μ› (Multi-tenant)
- β… **REST API**: FastAPI κΈ°λ°
- β… **μ»¨ν…μ΄λ„ λ°°ν¬**: Docker + uv

---

## π― ν”„λ΅μ νΈ μ§„ν–‰ μƒν™©

### Phase 1: Neo4j κΈ°λ³Έ μ„¤μ • β… (μ™„λ£)

**λ©ν‘**: Neo4j λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° λ° μ¤ν‚¤λ§ κµ¬μ„±

**μ™„λ£ λ‚΄μ©**:
- Neo4j 5.26 λ²„μ „ μ„¤μ •
- Bolt ν”„λ΅ν† μ½ μ—°κ²° (ν¬νΈ 7687)
- μ¤ν‚¤λ§ μλ™ μ΄κΈ°ν™”
  - Note λ…Έλ“: λ…ΈνΈ λ°μ΄ν„° μ €μ¥
  - SIMILAR_TO κ΄€κ³„: μ μ‚¬λ„ μ •λ³΄ μ €μ¥
- λ²΅ν„° μΈλ±μ¤ μ„¤μ • (HNSW)

**μ£Όμ” νμΌ**:
- `app/db/neo4j_client.py`: Neo4j μ—°κ²° κ΄€λ¦¬
- `app/db/init_db.py`: μ¤ν‚¤λ§ μ΄κΈ°ν™”

**ν…μ¤νΈ**: Neo4j μ—°κ²° ν™•μΈ β…

---

### Phase 2: CRUD μ‘μ—… λ° λ°μ΄ν„° μ ‘κ·Ό β… (μ™„λ£)

**λ©ν‘**: λ…ΈνΈμ μƒμ„±, μ΅°ν, μμ •, μ‚­μ  κΈ°λ¥ κµ¬ν„

**μ™„λ£ λ‚΄μ©**:
- **Create**: λ…ΈνΈ μƒμ„± (user_id, note_id, title, embedding)
- **Read**: 
  - λ‹¨μΌ λ…ΈνΈ μ΅°ν
  - λ©λ΅ μ΅°ν (νμ΄μ§€λ„¤μ΄μ…)
  - μ λ© κ²€μƒ‰
  - μ μ‚¬ λ…ΈνΈ μ΅°ν
- **Delete**: λ…ΈνΈ μ‚­μ  (κ΄€κ³„ ν¬ν•¨)
- **μ μ € κ²©λ¦¬**: λ¨λ“  μΏΌλ¦¬μ— user_id ν•„ν„° μ μ©

**μ£Όμ” νμΌ**:
- `app/crud/note.py`: CRUD μ‘μ—… κµ¬ν„

**ν…μ¤νΈ**: 9κ° ν…μ¤νΈ λ¨λ‘ ν†µκ³Ό β…
- λ…ΈνΈ μƒμ„±
- λ…ΈνΈ μ΅°ν
- λ…ΈνΈ λ©λ΅ μ΅°ν
- λ…ΈνΈ μ‚­μ 
- μ μ € κ²©λ¦¬
- DateTime λ³€ν™

---

### Phase 3: μ„λ² λ”© μ„λΉ„μ¤ & μ μ‚¬λ„ μ—°κ²° β… (μ™„λ£)

**λ©ν‘**: OpenAI API μ„λ² λ”© μƒμ„± λ° μ μ‚¬λ„ κΈ°λ° μλ™ μ—°κ²°

**μ™„λ£ λ‚΄μ©**:

#### 3-1. μ„λ² λ”© μ„λΉ„μ¤
- OpenAI API νΈμ¶ (text-embedding-3-small)
- 1536μ°¨μ› λ²΅ν„° μƒμ„±
- ν† ν° κ³„μ‚° λ° λ΅κΉ…
- ν”„λ΅μ‹ μ„λ²„ μ§€μ›

**μ£Όμ” νμΌ**: `app/services/embedding_service.py`

#### 3-2. μ μ‚¬λ„ μ„λΉ„μ¤
**νλ¦„**:
```
λ…ΈνΈ A μƒμ„± (μ„λ² λ”© μ™„λ£)
    β†“
HNSW λ²΅ν„° μΈλ±μ¤μ—μ„ Top-20 κ²€μƒ‰
    β†“
μ½”μ‚¬μΈ μ μ‚¬λ„ κ³„μ‚°
    β†“
μ„κ³„κ°’ ν•„ν„°λ§ (score β‰¥ 0.70)
    β†“
μµλ€ 10κ° κ΄€κ³„ μƒμ„± (SIMILAR_TO)
    β†“
μ–‘λ°©ν–¥ κ΄€κ³„ μ„¤μ •
```

**κΈ°λ¥**:
- μ μ‚¬ λ…ΈνΈ κ²€μƒ‰ (λ²΅ν„° κΈ°λ°)
- μλ™ κ΄€κ³„ μƒμ„±
- κ΄€κ³„ μ‚­μ 
- ν†µκ³„ μ΅°ν

**μ£Όμ” νμΌ**: `app/services/similarity_service.py`

**ν…μ¤νΈ**: 6κ° ν…μ¤νΈ λ¨λ‘ ν†µκ³Ό β…
- μ μ‚¬ λ…ΈνΈ κ²€μƒ‰
- κ΄€κ³„ μƒμ„±
- κ΄€κ³„ μ‚­μ 
- μ—°κ²° κ°μ μ΅°ν
- μ μ € ν†µκ³„
- μ μ € κ²©λ¦¬

---

### Phase 4: API μ—”λ“ν¬μΈνΈ & λ°°ν¬ β… (μ™„λ£)

**λ©ν‘**: FastAPI κΈ°λ° REST API κµ¬ν„ λ° Docker λ°°ν¬

#### 4-1. API μ—”λ“ν¬μΈνΈ κµ¬ν„

**λ…ΈνΈ κ΄€λ ¨** (`/api/v1/notes`):
- `POST /notes`: λ…ΈνΈ μƒμ„±
- `GET /notes`: λ…ΈνΈ λ©λ΅
- `GET /notes/{note_id}`: λ…ΈνΈ μƒμ„Έ μ΅°ν
- `DELETE /notes/{note_id}`: λ…ΈνΈ μ‚­μ 

**κ²€μƒ‰ κ΄€λ ¨** (`/api/v1/search`):
- `GET /search/by-title`: μ λ© κ²€μƒ‰

**ν†µκ³„ κ΄€λ ¨** (`/api/v1/stats`):
- `GET /stats`: κ·Έλν”„ ν†µκ³„

**μ£Όμ” νμΌ**:
- `app/api/v1/endpoints/notes.py`
- `app/api/v1/endpoints/search.py`
- `app/api/v1/endpoints/stats.py`
- `app/api/v1/routers.py`: λΌμ°ν„° ν†µν•©
- `app/api/v1/dependencies.py`: μμ΅΄μ„± μ£Όμ…

#### 4-2. λ΅κΉ… μµμ ν™”

- ν™κ²½λ³„ λ΅κ·Έ λ λ²¨ (DEBUG, INFO, WARNING, ERROR)
- ν”„λ΅λ•μ…: WARNING (κ²½κ³ λ§ μ¶λ ¥)
- κ°λ°: INFO (μΌλ° μ •λ³΄ ν¬ν•¨)

#### 4-3. Docker λ°°ν¬

**Dockerfile**:
- Multi-stage build (Builder + Runtime)
- uv ν¨ν‚¤μ§€ κ΄€λ¦¬μ μ‚¬μ©
- μµμ† μ΄λ―Έμ§€ ν¬κΈ°
- ν—¬μ¤ μ²΄ν¬ ν¬ν•¨

**docker-compose.yml**:
- FastAPI μ»¨ν…μ΄λ„λ§ (Neo4jλ” μ™Έλ¶€)
- ν™κ²½λ³€μ κ΄€λ¦¬ (.env νμΌ)
- λ³Όλ¥¨ λ§μ΄νΈ (κ°λ°μ©)

**ν…μ¤νΈ**: 10κ° API ν…μ¤νΈ λ¨λ‘ ν†µκ³Ό β…
- ν—¬μ¤ μ²΄ν¬
- λ…ΈνΈ μƒμ„±
- λ…ΈνΈ μ΅°ν
- λ…ΈνΈ λ©λ΅
- κ²€μƒ‰
- ν†µκ³„
- μ—λ¬ μ²λ¦¬

---

## π› οΈ κΈ°μ  μ¤νƒ (μµμ‹ )

### μ½”μ–΄ κΈ°μ 

| κΈ°μ  | λ²„μ „ | λ©μ  |
|------|------|------|
| **FastAPI** | 0.120.0 | REST API ν”„λ μ„μ›ν¬ |
| **Python** | 3.11+ | ν”„λ΅κ·Έλλ° μ–Έμ–΄ |
| **Neo4j** | 5.26 | κ·Έλν”„ λ°μ΄ν„°λ² μ΄μ¤ |
| **OpenAI API** | μµμ‹  | text-embedding-3-small |

### ν¨ν‚¤μ§€ κ΄€λ¦¬ & κ°λ°

| λ„κµ¬ | λ©μ  |
|------|------|
| **uv** | λΉ λ¥Έ Python ν¨ν‚¤μ§€ κ΄€λ¦¬μ |
| **pyproject.toml** | μμ΅΄μ„± μ •μ |
| **uv.lock** | λ²„μ „ κ³ μ • (μ¬ν„ κ°€λ¥) |
| **pytest** | λ‹¨μ„ ν…μ¤νΈ |
| **Docker** | μ»¨ν…μ΄λ„ λ°°ν¬ |

### ν•µμ‹¬ μμ΅΄μ„±

```
# ν”„λ΅λ•μ…
fastapi==0.120.0
uvicorn[standard]==0.32.0
pydantic==2.9.2
pydantic-settings==2.6.1
neo4j==5.26.0
openai==1.54.4
tiktoken==0.8.0
python-dotenv==1.0.1
python-multipart==0.0.18
httpx==0.27.2

# κ°λ°
pytest==8.3.3
pytest-asyncio==0.24.0
```

---

## π“ λ””λ ‰ν† λ¦¬ κµ¬μ΅° (μµμΆ…)

```
knowledge-graph-service/
β”β”€β”€ main.py                           # FastAPI μ•± μ—”νΈλ¦¬ν¬μΈνΈ
β”β”€β”€ Dockerfile                        # Docker μ΄λ―Έμ§€
β”β”€β”€ docker-compose.yml                # Docker Compose μ„¤μ •
β”β”€β”€ pyproject.toml                    # uv μμ΅΄μ„± μ •μ
β”β”€β”€ uv.lock                           # μμ΅΄μ„± μ κΈ νμΌ β­
β”β”€β”€ .env.example                      # ν™κ²½λ³€μ ν…ν”λ¦Ώ
β”β”€β”€ .gitignore                        # Git μ μ™Έ νμΌ
β”‚
β”β”€β”€ app/
β”‚   β”β”€β”€ api/
β”‚   β”‚   β””β”€β”€ v1/
β”‚   β”‚       β”β”€β”€ endpoints/
β”‚   β”‚       β”‚   β”β”€β”€ notes.py          # λ…ΈνΈ CRUD μ—”λ“ν¬μΈνΈ
β”‚   β”‚       β”‚   β”β”€β”€ search.py         # κ²€μƒ‰ μ—”λ“ν¬μΈνΈ
β”‚   β”‚       β”‚   β””β”€β”€ stats.py          # ν†µκ³„ μ—”λ“ν¬μΈνΈ
β”‚   β”‚       β”β”€β”€ routers.py            # λΌμ°ν„° ν†µν•©
β”‚   β”‚       β””β”€β”€ dependencies.py       # κ³µν†µ ν—¬νΌ (get_user_id)
β”‚   β”‚
β”‚   β”β”€β”€ core/
β”‚   β”‚   β”β”€β”€ config.py                 # ν™κ²½ μ„¤μ •
β”‚   β”‚   β””β”€β”€ constants.py              # μƒμ μ •μ
β”‚   β”‚
β”‚   β”β”€β”€ db/
β”‚   β”‚   β”β”€β”€ neo4j_client.py           # Neo4j ν΄λΌμ΄μ–ΈνΈ
β”‚   β”‚   β””β”€β”€ init_db.py                # μ¤ν‚¤λ§ μ΄κΈ°ν™”
β”‚   β”‚
β”‚   β”β”€β”€ crud/
β”‚   β”‚   β””β”€β”€ note.py                   # Note CRUD
β”‚   β”‚
β”‚   β”β”€β”€ services/
β”‚   β”‚   β”β”€β”€ embedding_service.py      # OpenAI μ„λ² λ”©
β”‚   β”‚   β””β”€β”€ similarity_service.py     # μ μ‚¬λ„ μ—°κ²°
β”‚   β”‚
β”‚   β””β”€β”€ schemas/
β”‚       β””β”€β”€ note.py                   # Pydantic λ¨λΈ
β”‚
β”β”€β”€ tests/
β”‚   β”β”€β”€ test_crud.py                  # CRUD ν…μ¤νΈ (9κ°)
β”‚   β”β”€β”€ test_similarity_service.py    # μ μ‚¬λ„ ν…μ¤νΈ (6κ°)
β”‚   β””β”€β”€ test_api.py                   # API ν†µν•© ν…μ¤νΈ (10κ°)
β”‚
β””β”€β”€ README.md                         # ν”„λ΅μ νΈ λ¬Έμ„
```

---

## π“ ν…μ¤νΈ ν„ν™©

### μ „μ²΄ ν…μ¤νΈ κ²°κ³Ό

| μΉ΄ν…κ³ λ¦¬ | ν…μ¤νΈ μ | μƒνƒ |
|----------|----------|------|
| CRUD | 9κ° | β… ν†µκ³Ό |
| μ μ‚¬λ„ μ„λΉ„μ¤ | 6κ° | β… ν†µκ³Ό |
| API ν†µν•© | 10κ° | β… ν†µκ³Ό |
| **μ΄ν•©** | **25κ°** | **β… λ¨λ‘ ν†µκ³Ό** |

### ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€

- β… κΈ°λ³Έ κΈ°λ¥ (CRUD, μ„λ² λ”©, μ μ‚¬λ„)
- β… μ—λ¬ μ²λ¦¬ (404, 400, 500)
- β… μ μ € κ²©λ¦¬
- β… DateTime λ³€ν™
- β… νμ΄μ§€λ„¤μ΄μ…
- β… λ²΅ν„° κ²€μƒ‰

---

## π” μ£Όμ” μ„¤μ •

### ν™κ²½λ³€μ (.env)

```
# Neo4j μ—°κ²° (μ™Έλ¶€ νΈμ¤νΈ)
NEO4J_URI=bolt://host.docker.internal:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=your-password

# OpenAI API
OPENAI_API_KEY=sk-...
OPENAI_BASE_URL=https://gms.ssafy.io/gmsapi/api.openai.com/v1
OPENAI_MODEL=text-embedding-3-small

# μ• ν”λ¦¬μΌ€μ΄μ…
SIMILARITY_THRESHOLD=0.70      # μ μ‚¬λ„ μ„κ³„κ°’
MAX_RELATIONSHIPS=10           # λ…ΈνΈλ‹Ή μµλ€ μ—°κ²° μ
LOG_LEVEL=WARNING              # ν”„λ΅λ•μ…
```

### μ£Όμ” μƒμ

```
# μ„λ² λ”©
EMBEDDING_DIMENSION = 1536     # text-embedding-3-small
EMBEDDING_MODEL = "text-embedding-3-small"

# μ μ‚¬λ„
SIMILARITY_THRESHOLD = 0.70    # κΈ°λ³Έ μ„κ³„κ°’
MAX_RELATIONSHIPS = 10         # μµλ€ κ΄€κ³„ μ

# νμ΄μ§€λ„¤μ΄μ…
DEFAULT_PAGE_LIMIT = 20
MAX_PAGE_LIMIT = 100
DEFAULT_SEARCH_LIMIT = 20
```

---

## π€ λ°°ν¬ λ°©μ‹

### λ΅μ»¬ κ°λ°

```
uv sync                 # ν™κ²½ μ„¤μ •
uv run python main.py   # μ„λ²„ μ‹¤ν–‰
```

### Docker λ°°ν¬

```
docker-compose build           # μ΄λ―Έμ§€ λΉλ“
docker-compose up -d           # μ»¨ν…μ΄λ„ μ‹¤ν–‰
docker-compose logs -f fastapi # λ΅κ·Έ ν™•μΈ
```

### ν™κ²½ μ„¤μ • (μ¤‘μ”!)

**Dockerμ—μ„ localhostλ” μ»¨ν…μ΄λ„ μμ‹ μ„ κ°€λ¦¬ν‚΄**:
- macOS/Windows: `NEO4J_URI=bolt://host.docker.internal:7687`
- Linux: νΈμ¤νΈ IP μ‚¬μ© μ: `bolt://192.168.1.100:7687`

---

## π“ λ°μ΄ν„° νλ¦„

### λ…ΈνΈ μƒμ„± νλ¦„

```
1οΈβƒ£ POST /api/v1/notes
   β”β”€ note_id, title, content μμ‹ 
   β”β”€ user_id (Headerμ—μ„ μ¶”μ¶)
   β”‚
2οΈβƒ£ μ„λ² λ”© μƒμ„±
   β”β”€ OpenAI API νΈμ¶
   β”β”€ 1536μ°¨μ› λ²΅ν„° μƒμ„±
   β”β”€ ν† ν° κ³„μ‚°
   β”‚
3οΈβƒ£ λ…ΈνΈ μ €μ¥
   β”β”€ Neo4jμ— μ €μ¥
   β”β”€ embedding λ²΅ν„° ν¬ν•¨
   β”β”€ user_idλ΅ κ²©λ¦¬
   β”‚
4οΈβƒ£ μ μ‚¬λ„ μ—°κ²°
   β”β”€ HNSW μΈλ±μ¤ κ²€μƒ‰
   β”β”€ Top-20 ν›„λ³΄ μ¶”μ¶
   β”β”€ μ½”μ‚¬μΈ μ μ‚¬λ„ κ³„μ‚°
   β”β”€ μ„κ³„κ°’ ν•„ν„°λ§ (β‰¥0.70)
   β”β”€ μµλ€ 10κ° κ΄€κ³„ μƒμ„±
   β”‚
5οΈβƒ£ μ‘λ‹µ
   β””β”€ {note_id, embedding_dimension, linked_notes_count}
```

### λ…ΈνΈ μ΅°ν νλ¦„

```
GET /api/v1/notes/{note_id}
  β”β”€ user_id κ²€μ¦
  β”β”€ λ…ΈνΈ μ΅°ν (user_idλ΅ ν•„ν„°)
  β”β”€ μ μ‚¬ λ…ΈνΈ μ΅°ν
  β””β”€ μ‘λ‹µ {note, similar_notes[]}
```

---

## π”„ API λ…μ„Έ

### μ—”λ“ν¬μΈνΈ λ©λ΅

| λ©”μ„λ“ | κ²½λ΅ | μΈμ¦ | μ„¤λ… |
|--------|------|------|------|
| POST | `/api/v1/notes` | β… user_id | λ…ΈνΈ μƒμ„± |
| GET | `/api/v1/notes` | β… user_id | λ©λ΅ μ΅°ν |
| GET | `/api/v1/notes/{note_id}` | β… user_id | μƒμ„Έ μ΅°ν |
| DELETE | `/api/v1/notes/{note_id}` | β… user_id | μ‚­μ  |
| GET | `/api/v1/search/by-title` | β… user_id | μ λ© κ²€μƒ‰ |
| GET | `/api/v1/stats` | β… user_id | ν†µκ³„ |

### μ”μ²­/μ‘λ‹µ μμ‹

#### λ…ΈνΈ μƒμ„±

**μ”μ²­**:
```
POST /api/v1/notes
Headers: X-User-ID: user-123

Body:
{
  "note_id": "550e8400-e29b-41d4-a716-446655440000",
  "title": "Neo4j κΈ°μ΄",
  "content": "Neo4jλ” κ·Έλν”„ λ°μ΄ν„°λ² μ΄μ¤μ…λ‹λ‹¤..."
}
```

**μ‘λ‹µ**:
```
{
  "note_id": "550e8400-e29b-41d4-a716-446655440000",
  "user_id": "user-123",
  "embedding_dimension": 1536,
  "linked_notes_count": 3
}
```

#### λ…ΈνΈ μ΅°ν

**μ”μ²­**:
```
GET /api/v1/notes/550e8400-e29b-41d4-a716-446655440000
Headers: X-User-ID: user-123
```

**μ‘λ‹µ**:
```
{
  "note_id": "550e8400-e29b-41d4-a716-446655440000",
  "user_id": "user-123",
  "title": "Neo4j κΈ°μ΄",
  "created_at": "2025-11-03T12:00:00.000Z",
  "updated_at": null,
  "similar_notes": [
    {
      "note_id": "...",
      "title": "κ·Έλν”„ λ°μ΄ν„°λ² μ΄μ¤",
      "similarity_score": 0.82,
      "created_at": "2025-11-02T15:30:00.000Z"
    }
  ]
}
```

---

## π― μ„¤μ • λ° μƒμ

### μ μ‚¬λ„ μ„κ³„κ°’ κ°€μ΄λ“

| μ„κ³„κ°’ | μ„¤λ… | μ‚¬μ© μ‚¬λ΅€ |
|--------|------|----------|
| **0.80+** | κ±°μ λ™μΌ μ£Όμ  | μ—„κ²©ν• ν•„ν„°λ§ |
| **0.70-0.79** | μ μ‚¬ν• μ£Όμ  | β… **κΈ°λ³Έ** |
| **0.60-0.69** | κ΄€λ ¨λ μ£Όμ  | λμ¨ν• μ—°κ²° |
| **0.60-** | κ΄€λ ¨ μ—†μ | μ—°κ²° μ• ν•¨ |

### λ΅κ·Έ λ λ²¨

| λ λ²¨ | μ¶λ ¥ | μ©λ„ |
|------|------|------|
| DEBUG | λ¨λ“  λ΅κ·Έ | κ°λ° ν™κ²½ |
| INFO | β… μ •λ³΄ + μƒμ„ | κ°λ°/ν…μ¤νΈ |
| **WARNING** | β οΈ κ²½κ³  + μ—λ¬ | **ν”„λ΅λ•μ…** |
| ERROR | β μ—λ¬λ§ | μ—„κ²©ν• λ¨λ‹ν„°λ§ |

---

## π“ μμ΅΄μ„± κ΄€λ¦¬ (uv)

### ν¨ν‚¤μ§€ μ¶”κ°€

```
uv add fastapi@latest          # μµμ‹  λ²„μ „
uv add "neo4j~=5.26"           # νΈν™μ„± λ²”μ„
uv add --dev pytest@latest     # κ°λ° ν¨ν‚¤μ§€
```

### λ²„μ „ μ—…λ°μ΄νΈ

```
uv pip list --outdated         # μ—…λ°μ΄νΈ κ°€λ¥ν• ν¨ν‚¤μ§€ ν™•μΈ
uv sync --upgrade              # λ¨λ“  ν¨ν‚¤μ§€ μ—…λ°μ΄νΈ
uv lock --upgrade-package fastapi  # νΉμ • ν¨ν‚¤μ§€ μ—…λ°μ΄νΈ
```

### Git κ΄€λ¦¬

```
# uv.lockμ€ Gitμ— μ»¤λ°‹ (μ¬ν„ κ°€λ¥ν• ν™κ²½)
git add pyproject.toml uv.lock

# .envλ” μ μ™Έ (λ―Όκ°μ •λ³΄)
# (μ΄λ―Έ .gitignoreμ— μ„¤μ •λ¨)
```

---

## π”® Phase 5 κ³„ν (λ‹¤μ λ‹¨κ³„)

### λ©ν‘: λΉ„λ™κΈ° μ²λ¦¬ + λ©”μ‹μ§€ ν

**μ•„ν‚¤ν…μ² λ³€κ²½**:
```
Spring Boot Backend
     β†“ (λ…ΈνΈ μ €μ¥)
PostgreSQL
     β†“ (λ©”μ‹μ§€ λ°ν–‰)
RabbitMQ (λΉ„λ™κΈ° ν)
     β†“ (λ©”μ‹μ§€ μμ‹ )
Knowledge Graph Service (FastAPI)
     β”β”€ Embedding Worker (μ„λ² λ”© μƒμ„±)
     β”β”€ Similarity Worker (μ μ‚¬λ„ κ³„μ‚°)
     β””β”€ Neo4j (μ €μ¥)
```

**λ³€ν™”μ **:
- μ„λ² λ”© μ‘μ—… λΉ„λ™κΈ°ν™” (μ‘λ‹µ μ‹κ°„ λ‹¨μ¶•)
- λ©”μ‹μ§€ κΈ°λ° ν†µμ‹  (λμ¨ν• κ²°ν•©)
- μ›μ»¤ λ¶„λ¦¬ (ν™•μ¥μ„± ν–¥μƒ)
- μ¬μ‹λ„ λ΅μ§ μ¶”κ°€ (μ•μ •μ„±)

---

## π” μ£Όμ” νμΌ μ„¤λ…

| νμΌ | λ©μ  | λΌμΈ μ |
|------|------|--------|
| `main.py` | FastAPI μ•± | ~80 |
| `app/db/neo4j_client.py` | Neo4j μ—°κ²° | ~50 |
| `app/crud/note.py` | CRUD μ‘μ—… | ~250 |
| `app/services/embedding_service.py` | μ„λ² λ”© μƒμ„± | ~100 |
| `app/services/similarity_service.py` | μ μ‚¬λ„ μ—°κ²° | ~150 |
| `app/api/v1/endpoints/notes.py` | λ…ΈνΈ API | ~200 |
| `Dockerfile` | μ»¨ν…μ΄λ„ μ΄λ―Έμ§€ | ~30 |
| `pyproject.toml` | μμ΅΄μ„± μ •μ | ~40 |

---

## β… μ™„λ£ μ²΄ν¬λ¦¬μ¤νΈ

### Phase 1-4 μ™„λ£ β…

- β… Neo4j μ„¤μ •
- β… CRUD κµ¬ν„ (9κ° ν…μ¤νΈ)
- β… μ„λ² λ”© μ„λΉ„μ¤ (OpenAI API)
- β… μ μ‚¬λ„ μ—°κ²° (6κ° ν…μ¤νΈ)
- β… REST API (FastAPI)
- β… API ν†µν•© ν…μ¤νΈ (10κ°)
- β… Docker λ°°ν¬
- β… uv ν¨ν‚¤μ§€ κ΄€λ¦¬
- β… ν™κ²½λ³„ λ΅κΉ…
- β… λ¬Έμ„ν™” (README.md)

### Phase 5 λ€κΈ° π”

- π” RabbitMQ μ„¤μ •
- π” λΉ„λ™κΈ° μ›μ»¤ κµ¬ν„
- π” λ©”μ‹μ§€ κΈ°λ° ν†µμ‹ 
- π” Spring Boot ν†µν•©

---

## π“ λΉ λ¥Έ μ°Έκ³ 

### μ„λ²„ μ‹¤ν–‰

```
# λ΅μ»¬
uv run python main.py

# Docker
docker-compose up -d
```

### λ¬Έμ„ μ ‘μ†

- Swagger: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

### ν…μ¤νΈ μ‹¤ν–‰

```
uv run pytest tests/ -v
docker-compose exec fastapi pytest tests/ -v
```

### μΌλ°μ μΈ λ¬Έμ  ν•΄κ²°

**Dockerμ—μ„ Neo4j μ—°κ²° μ• λ¨**:
- .env μμ •: `NEO4J_URI=bolt://host.docker.internal:7687`

**ν¨ν‚¤μ§€ μ¶©λ**:
- `uv sync --force` μ‹¤ν–‰

**ν…μ¤νΈ μ‹¤ν¨**:
- `uv run pytest tests/ -x -v` (μ²« μ‹¤ν¨μ—μ„ μ¤‘λ‹¨)

---
